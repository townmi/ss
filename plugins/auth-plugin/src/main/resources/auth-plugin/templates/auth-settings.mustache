<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{title}} - Auth Plugin</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 2rem;
            font-weight: 600;
        }

        .nav-links {
            display: flex;
            gap: 1.5rem;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .nav-links a:hover {
            background-color: rgba(255,255,255,0.1);
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 2rem;
        }

        .settings-nav {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 1rem;
            height: fit-content;
        }

        .settings-nav h3 {
            color: #2d3748;
            margin-bottom: 1rem;
            padding: 0 0.5rem;
        }

        .nav-item {
            display: block;
            padding: 0.75rem 1rem;
            color: #4a5568;
            text-decoration: none;
            border-radius: 5px;
            margin-bottom: 0.25rem;
            transition: all 0.3s;
        }

        .nav-item:hover {
            background-color: #f7fafc;
            color: #2d3748;
        }

        .nav-item.active {
            background-color: #667eea;
            color: white;
        }

        .settings-content {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 2rem;
        }

        .settings-section {
            display: none;
        }

        .settings-section.active {
            display: block;
        }

        .section-header {
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #e2e8f0;
        }

        .section-header h2 {
            color: #2d3748;
            margin-bottom: 0.5rem;
        }

        .section-header p {
            color: #718096;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #4a5568;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #e2e8f0;
            border-radius: 5px;
            font-size: 0.9rem;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group small {
            display: block;
            margin-top: 0.25rem;
            color: #718096;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .switch-group {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }

        .switch-label {
            flex: 1;
        }

        .switch-label h4 {
            color: #2d3748;
            margin-bottom: 0.25rem;
        }

        .switch-label p {
            color: #718096;
            font-size: 0.875rem;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #cbd5e0;
            transition: .4s;
            border-radius: 24px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #667eea;
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background-color: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background-color: #5a67d8;
        }

        .btn-secondary {
            background-color: #e2e8f0;
            color: #4a5568;
        }

        .btn-secondary:hover {
            background-color: #cbd5e0;
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid #e2e8f0;
        }

        .alert {
            padding: 1rem;
            border-radius: 5px;
            margin-bottom: 1rem;
        }

        .alert-success {
            background-color: #c6f6d5;
            color: #22543d;
            border: 1px solid #9ae6b4;
        }

        .alert-error {
            background-color: #fed7d7;
            color: #742a2a;
            border: 1px solid #fc8181;
        }

        .table-wrapper {
            overflow-x: auto;
            margin-top: 1rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background-color: #f7fafc;
            padding: 0.75rem;
            text-align: left;
            font-weight: 600;
            color: #4a5568;
            border-bottom: 2px solid #e2e8f0;
        }

        td {
            padding: 0.75rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .status-active {
            color: #48bb78;
        }

        .status-inactive {
            color: #e53e3e;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1>ğŸ” {{title}}</h1>
            <div class="nav-links">
                <a href="/auth/">ä»ªè¡¨æ¿</a>
                <a href="/auth/logs/page">ç™»å½•æ—¥å¿—</a>
                <a href="/auth/admin/security/stats/page">å®‰å…¨ç»Ÿè®¡</a>
                <a href="/auth/admin/security/blacklist/page">IPé»‘åå•</a>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="settings-grid">
            <div class="settings-nav">
                <h3>è®¾ç½®é€‰é¡¹</h3>
                <a href="#general" class="nav-item active" onclick="showSection('general')">åŸºæœ¬è®¾ç½®</a>
                <a href="#security" class="nav-item" onclick="showSection('security')">å®‰å…¨è®¾ç½®</a>
                <a href="#jwt" class="nav-item" onclick="showSection('jwt')">JWTè®¾ç½®</a>
                <a href="#notifications" class="nav-item" onclick="showSection('notifications')">é€šçŸ¥è®¾ç½®</a>
                <a href="#advanced" class="nav-item" onclick="showSection('advanced')">é«˜çº§è®¾ç½®</a>
            </div>

            <div class="settings-content">
                <div id="alert-container"></div>

                <!-- åŸºæœ¬è®¾ç½® -->
                <div id="general" class="settings-section active">
                    <div class="section-header">
                        <h2>åŸºæœ¬è®¾ç½®</h2>
                        <p>é…ç½®è®¤è¯ç³»ç»Ÿçš„åŸºæœ¬å‚æ•°</p>
                    </div>

                    <form id="generalForm">
                        <div class="form-group">
                            <label>ç³»ç»Ÿåç§°</label>
                            <input type="text" name="systemName" value="Auth System" placeholder="è¾“å…¥ç³»ç»Ÿåç§°">
                            <small>æ˜¾ç¤ºåœ¨ç™»å½•é¡µé¢å’Œé‚®ä»¶ä¸­çš„ç³»ç»Ÿåç§°</small>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>ä¼šè¯è¶…æ—¶æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰</label>
                                <input type="number" name="sessionTimeout" value="30" min="5" max="1440">
                                <small>ç”¨æˆ·æ— æ“ä½œåè‡ªåŠ¨ç™»å‡ºçš„æ—¶é—´</small>
                            </div>

                            <div class="form-group">
                                <label>è®°ä½æˆ‘æœ‰æ•ˆæœŸï¼ˆå¤©ï¼‰</label>
                                <input type="number" name="rememberMeDays" value="7" min="1" max="90">
                                <small>"è®°ä½æˆ‘"åŠŸèƒ½çš„æœ‰æ•ˆå¤©æ•°</small>
                            </div>
                        </div>

                        <div class="switch-group">
                            <div class="switch-label">
                                <h4>å…è®¸ç”¨æˆ·æ³¨å†Œ</h4>
                                <p>å¼€å¯åç”¨æˆ·å¯ä»¥è‡ªè¡Œæ³¨å†Œæ–°è´¦æˆ·</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" name="allowRegistration" checked>
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="switch-group">
                            <div class="switch-label">
                                <h4>é‚®ç®±éªŒè¯</h4>
                                <p>æ–°ç”¨æˆ·æ³¨å†Œåéœ€è¦éªŒè¯é‚®ç®±æ‰èƒ½ç™»å½•</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" name="requireEmailVerification">
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">ä¿å­˜è®¾ç½®</button>
                            <button type="button" class="btn btn-secondary" onclick="resetForm('generalForm')">é‡ç½®</button>
                        </div>
                    </form>
                </div>

                <!-- å®‰å…¨è®¾ç½® -->
                <div id="security" class="settings-section">
                    <div class="section-header">
                        <h2>å®‰å…¨è®¾ç½®</h2>
                        <p>é…ç½®ç™»å½•å®‰å…¨å’Œå¯†ç ç­–ç•¥</p>
                    </div>

                    <form id="securityForm">
                        <h3 style="margin-bottom: 1rem; color: #4a5568;">ç™»å½•é™åˆ¶</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>æœ€å¤§å¤±è´¥æ¬¡æ•°</label>
                                <input type="number" name="maxFailedAttempts" value="5" min="3" max="10">
                                <small>è¿ç»­å¤±è´¥æ­¤æ¬¡æ•°åé”å®šè´¦æˆ·</small>
                            </div>

                            <div class="form-group">
                                <label>é”å®šæ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰</label>
                                <input type="number" name="lockDuration" value="30" min="5" max="1440">
                                <small>è´¦æˆ·è¢«é”å®šçš„æ—¶é—´</small>
                            </div>
                        </div>

                        <h3 style="margin: 2rem 0 1rem; color: #4a5568;">å¯†ç ç­–ç•¥</h3>

                        <div class="form-row">
                            <div class="form-group">
                                <label>æœ€å°é•¿åº¦</label>
                                <input type="number" name="minPasswordLength" value="8" min="6" max="32">
                            </div>

                            <div class="form-group">
                                <label>å¯†ç æœ‰æ•ˆæœŸï¼ˆå¤©ï¼‰</label>
                                <input type="number" name="passwordExpireDays" value="90" min="0" max="365">
                                <small>0è¡¨ç¤ºæ°¸ä¸è¿‡æœŸ</small>
                            </div>
                        </div>

                        <div class="switch-group">
                            <div class="switch-label">
                                <h4>éœ€è¦å¤§å†™å­—æ¯</h4>
                                <p>å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå¤§å†™å­—æ¯</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" name="requireUppercase" checked>
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="switch-group">
                            <div class="switch-label">
                                <h4>éœ€è¦å°å†™å­—æ¯</h4>
                                <p>å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå°å†™å­—æ¯</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" name="requireLowercase" checked>
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="switch-group">
                            <div class="switch-label">
                                <h4>éœ€è¦æ•°å­—</h4>
                                <p>å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªæ•°å­—</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" name="requireDigit" checked>
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="switch-group">
                            <div class="switch-label">
                                <h4>éœ€è¦ç‰¹æ®Šå­—ç¬¦</h4>
                                <p>å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" name="requireSpecial">
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">ä¿å­˜è®¾ç½®</button>
                            <button type="button" class="btn btn-secondary" onclick="resetForm('securityForm')">é‡ç½®</button>
                        </div>
                    </form>
                </div>

                <!-- JWTè®¾ç½® -->
                <div id="jwt" class="settings-section">
                    <div class="section-header">
                        <h2>JWTè®¾ç½®</h2>
                        <p>é…ç½®JSON Web Tokenå‚æ•°</p>
                    </div>

                    <form id="jwtForm">
                        <div class="form-group">
                            <label>ç­¾åç®—æ³•</label>
                            <select name="algorithm">
                                <option value="HS256" selected>HS256 (HMAC with SHA-256)</option>
                                <option value="HS384">HS384 (HMAC with SHA-384)</option>
                                <option value="HS512">HS512 (HMAC with SHA-512)</option>
                                <option value="RS256">RS256 (RSA with SHA-256)</option>
                                <option value="RS384">RS384 (RSA with SHA-384)</option>
                                <option value="RS512">RS512 (RSA with SHA-512)</option>
                            </select>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Access Tokenæœ‰æ•ˆæœŸï¼ˆåˆ†é’Ÿï¼‰</label>
                                <input type="number" name="accessTokenExpiry" value="15" min="5" max="1440">
                                <small>è®¿é—®ä»¤ç‰Œçš„æœ‰æ•ˆæ—¶é—´</small>
                            </div>

                            <div class="form-group">
                                <label>Refresh Tokenæœ‰æ•ˆæœŸï¼ˆå¤©ï¼‰</label>
                                <input type="number" name="refreshTokenExpiry" value="30" min="1" max="365">
                                <small>åˆ·æ–°ä»¤ç‰Œçš„æœ‰æ•ˆå¤©æ•°</small>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>ç­¾åå¯†é’¥</label>
                            <textarea name="secretKey" rows="3" placeholder="è¾“å…¥JWTç­¾åå¯†é’¥">your-256-bit-secret-key-here-keep-it-secure</textarea>
                            <small>è¯·ä½¿ç”¨è¶³å¤Ÿå¤æ‚çš„å¯†é’¥ï¼Œå»ºè®®è‡³å°‘32ä¸ªå­—ç¬¦</small>
                        </div>

                        <div class="form-group">
                            <label>Issuer (iss)</label>
                            <input type="text" name="issuer" value="auth-system" placeholder="ä»¤ç‰Œç­¾å‘è€…">
                        </div>

                        <div class="form-group">
                            <label>Audience (aud)</label>
                            <input type="text" name="audience" value="api-users" placeholder="ä»¤ç‰Œæ¥æ”¶è€…">
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">ä¿å­˜è®¾ç½®</button>
                            <button type="button" class="btn btn-secondary" onclick="resetForm('jwtForm')">é‡ç½®</button>
                        </div>
                    </form>
                </div>

                <!-- é€šçŸ¥è®¾ç½® -->
                <div id="notifications" class="settings-section">
                    <div class="section-header">
                        <h2>é€šçŸ¥è®¾ç½®</h2>
                        <p>é…ç½®ç³»ç»Ÿé€šçŸ¥å’Œé‚®ä»¶æé†’</p>
                    </div>

                    <form id="notificationsForm">
                        <h3 style="margin-bottom: 1rem; color: #4a5568;">é‚®ä»¶æœåŠ¡å™¨</h3>

                        <div class="form-row">
                            <div class="form-group">
                                <label>SMTPæœåŠ¡å™¨</label>
                                <input type="text" name="smtpHost" placeholder="smtp.example.com">
                            </div>

                            <div class="form-group">
                                <label>ç«¯å£</label>
                                <input type="number" name="smtpPort" value="587" min="1" max="65535">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>ç”¨æˆ·å</label>
                                <input type="text" name="smtpUsername" placeholder="your-email@example.com">
                            </div>

                            <div class="form-group">
                                <label>å¯†ç </label>
                                <input type="password" name="smtpPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>å‘ä»¶äººåœ°å€</label>
                            <input type="email" name="fromEmail" placeholder="noreply@example.com">
                        </div>

                        <div class="switch-group">
                            <div class="switch-label">
                                <h4>ä½¿ç”¨TLS/SSL</h4>
                                <p>å¯ç”¨å®‰å…¨è¿æ¥</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" name="useTls" checked>
                                <span class="slider"></span>
                            </label>
                        </div>

                        <h3 style="margin: 2rem 0 1rem; color: #4a5568;">é€šçŸ¥é€‰é¡¹</h3>

                        <div class="switch-group">
                            <div class="switch-label">
                                <h4>ç™»å½•æˆåŠŸé€šçŸ¥</h4>
                                <p>ç”¨æˆ·ç™»å½•æˆåŠŸæ—¶å‘é€é‚®ä»¶é€šçŸ¥</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" name="notifyLoginSuccess">
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="switch-group">
                            <div class="switch-label">
                                <h4>å¼‚å¸¸ç™»å½•è­¦å‘Š</h4>
                                <p>æ£€æµ‹åˆ°å¼‚å¸¸ç™»å½•è¡Œä¸ºæ—¶å‘é€è­¦å‘Š</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" name="notifyAbnormalLogin" checked>
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="switch-group">
                            <div class="switch-label">
                                <h4>å¯†ç ä¿®æ”¹é€šçŸ¥</h4>
                                <p>å¯†ç è¢«ä¿®æ”¹æ—¶å‘é€é€šçŸ¥</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" name="notifyPasswordChange" checked>
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">ä¿å­˜è®¾ç½®</button>
                            <button type="button" class="btn btn-secondary" onclick="testEmailConnection()">æµ‹è¯•è¿æ¥</button>
                            <button type="button" class="btn btn-secondary" onclick="resetForm('notificationsForm')">é‡ç½®</button>
                        </div>
                    </form>
                </div>

                <!-- é«˜çº§è®¾ç½® -->
                <div id="advanced" class="settings-section">
                    <div class="section-header">
                        <h2>é«˜çº§è®¾ç½®</h2>
                        <p>ç³»ç»Ÿé«˜çº§é…ç½®å’Œç»´æŠ¤é€‰é¡¹</p>
                    </div>

                    <form id="advancedForm">
                        <h3 style="margin-bottom: 1rem; color: #4a5568;">æ•°æ®ä¿ç•™</h3>

                        <div class="form-row">
                            <div class="form-group">
                                <label>ç™»å½•æ—¥å¿—ä¿ç•™å¤©æ•°</label>
                                <input type="number" name="logRetentionDays" value="90" min="7" max="365">
                                <small>è¶…è¿‡æ­¤å¤©æ•°çš„æ—¥å¿—å°†è¢«è‡ªåŠ¨æ¸…ç†</small>
                            </div>

                            <div class="form-group">
                                <label>å¤±è´¥å°è¯•è®°å½•ä¿ç•™å°æ—¶</label>
                                <input type="number" name="attemptRetentionHours" value="24" min="1" max="168">
                                <small>æ¸…ç†è¿‡æœŸçš„å¤±è´¥ç™»å½•è®°å½•</small>
                            </div>
                        </div>

                        <h3 style="margin: 2rem 0 1rem; color: #4a5568;">APIé™æµ</h3>

                        <div class="form-row">
                            <div class="form-group">
                                <label>ç™»å½•æ¥å£é™æµï¼ˆæ¬¡/åˆ†é’Ÿï¼‰</label>
                                <input type="number" name="loginRateLimit" value="10" min="1" max="100">
                                <small>æ¯ä¸ªIPæ¯åˆ†é’Ÿæœ€å¤šå°è¯•ç™»å½•æ¬¡æ•°</small>
                            </div>

                            <div class="form-group">
                                <label>APIè¯·æ±‚é™æµï¼ˆæ¬¡/åˆ†é’Ÿï¼‰</label>
                                <input type="number" name="apiRateLimit" value="60" min="10" max="1000">
                                <small>æ¯ä¸ªç”¨æˆ·æ¯åˆ†é’Ÿæœ€å¤šAPIè¯·æ±‚æ¬¡æ•°</small>
                            </div>
                        </div>

                        <h3 style="margin: 2rem 0 1rem; color: #4a5568;">ç³»ç»Ÿç»´æŠ¤</h3>

                        <div class="switch-group">
                            <div class="switch-label">
                                <h4>ç»´æŠ¤æ¨¡å¼</h4>
                                <p>å¯ç”¨ååªæœ‰ç®¡ç†å‘˜å¯ä»¥ç™»å½•</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" name="maintenanceMode">
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="form-group">
                            <label>ç»´æŠ¤æç¤ºä¿¡æ¯</label>
                            <textarea name="maintenanceMessage" rows="3" placeholder="ç³»ç»Ÿæ­£åœ¨ç»´æŠ¤ä¸­ï¼Œè¯·ç¨åå†è¯•...">ç³»ç»Ÿæ­£åœ¨ç»´æŠ¤ä¸­ï¼Œé¢„è®¡æ¢å¤æ—¶é—´ï¼šå¾…å®š</textarea>
                        </div>

                        <h3 style="margin: 2rem 0 1rem; color: #4a5568;">æ•°æ®åº“æ¸…ç†</h3>

                        <div style="background-color: #fff5f5; border: 1px solid #feb2b2; padding: 1rem; border-radius: 5px; margin-bottom: 1rem;">
                            <p style="color: #c53030; margin: 0;">âš ï¸ è­¦å‘Šï¼šä»¥ä¸‹æ“ä½œä¸å¯æ¢å¤ï¼Œè¯·è°¨æ…æ“ä½œï¼</p>
                        </div>

                        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                            <button type="button" class="btn btn-secondary" onclick="cleanupLogs()">æ¸…ç†è¿‡æœŸæ—¥å¿—</button>
                            <button type="button" class="btn btn-secondary" onclick="cleanupAttempts()">æ¸…ç†å¤±è´¥è®°å½•</button>
                            <button type="button" class="btn btn-secondary" onclick="cleanupSessions()">æ¸…ç†è¿‡æœŸä¼šè¯</button>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">ä¿å­˜è®¾ç½®</button>
                            <button type="button" class="btn btn-secondary" onclick="resetForm('advancedForm')">é‡ç½®</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ˜¾ç¤ºæŒ‡å®šçš„è®¾ç½®éƒ¨åˆ†
        function showSection(sectionId) {
            // éšè—æ‰€æœ‰éƒ¨åˆ†
            document.querySelectorAll('.settings-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // ç§»é™¤æ‰€æœ‰å¯¼èˆªé¡¹çš„activeç±»
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // æ˜¾ç¤ºé€‰ä¸­çš„éƒ¨åˆ†
            document.getElementById(sectionId).classList.add('active');
            
            // è®¾ç½®å¯¼èˆªé¡¹ä¸ºactive
            document.querySelector(`a[href="#${sectionId}"]`).classList.add('active');
        }

        // æ˜¾ç¤ºæç¤ºæ¶ˆæ¯
        function showAlert(message, type = 'success') {
            const alertContainer = document.getElementById('alert-container');
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.textContent = message;
            
            alertContainer.innerHTML = '';
            alertContainer.appendChild(alert);
            
            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±
            setTimeout(() => {
                alert.remove();
            }, 3000);
        }

        // é‡ç½®è¡¨å•
        function resetForm(formId) {
            document.getElementById(formId).reset();
            showAlert('è¡¨å•å·²é‡ç½®', 'success');
        }

        // ä¿å­˜è®¾ç½®ï¼ˆç¤ºä¾‹ï¼‰
        document.querySelectorAll('form').forEach(form => {
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = new FormData(form);
                const data = Object.fromEntries(formData);
                
                // å¤„ç†å¤é€‰æ¡†
                form.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                    data[checkbox.name] = checkbox.checked;
                });
                
                console.log('Saving settings:', data);
                
                // TODO: å‘é€åˆ°åç«¯API
                showAlert('è®¾ç½®å·²ä¿å­˜', 'success');
            });
        });

        // æµ‹è¯•é‚®ä»¶è¿æ¥
        function testEmailConnection() {
            showAlert('æ­£åœ¨æµ‹è¯•é‚®ä»¶æœåŠ¡å™¨è¿æ¥...', 'success');
            // TODO: è°ƒç”¨APIæµ‹è¯•è¿æ¥
            setTimeout(() => {
                showAlert('é‚®ä»¶æœåŠ¡å™¨è¿æ¥æˆåŠŸ', 'success');
            }, 2000);
        }

        // æ¸…ç†å‡½æ•°
        function cleanupLogs() {
            if (confirm('ç¡®å®šè¦æ¸…ç†è¿‡æœŸçš„ç™»å½•æ—¥å¿—å—ï¼Ÿ')) {
                showAlert('æ­£åœ¨æ¸…ç†è¿‡æœŸæ—¥å¿—...', 'success');
                // TODO: è°ƒç”¨æ¸…ç†API
            }
        }

        function cleanupAttempts() {
            if (confirm('ç¡®å®šè¦æ¸…ç†å¤±è´¥çš„ç™»å½•è®°å½•å—ï¼Ÿ')) {
                showAlert('æ­£åœ¨æ¸…ç†å¤±è´¥è®°å½•...', 'success');
                // TODO: è°ƒç”¨æ¸…ç†API
            }
        }

        function cleanupSessions() {
            if (confirm('ç¡®å®šè¦æ¸…ç†è¿‡æœŸçš„ä¼šè¯å—ï¼Ÿ')) {
                showAlert('æ­£åœ¨æ¸…ç†è¿‡æœŸä¼šè¯...', 'success');
                // TODO: è°ƒç”¨æ¸…ç†API
            }
        }

        // å¤„ç†URL hash
        if (window.location.hash) {
            const section = window.location.hash.substring(1);
            showSection(section);
        }
    </script>
</body>
</html> 